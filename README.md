# 🔐 Universal Backend Setup

This repository is a minimalistic setup for running your services with Docker Compose behind Traefik with autogenerated `https` certificates.

Let's say, you have the `API` service (e.g. NodeJS app), React app for frontend and would like to make it available via `https://api.your-domain.com` and `https://dashboard.your-domain.com`, then you are at the right place!

> _HTTPS Backend_ is a part of [starters.dev](https://github.com/starters-dev) collection.

## Getting Started

### Quickstart

1. Connect to the remote server

```bash
> ssh root@IP_ADDRESS
```

> Hint: you can use a cloud computing providers such as [DigitalOcean](https://digitalocean.com).

2. Clone this repo

```bash
> git clone https://github.com/starters-dev/https-backend backend
> cd backend
```

3. Fill in `.env` file with your information

```bash
> mv .env.example .env
> nano .env
```

Check [Environment variables](#environment-variables) section for more information.

4. Get a service repo

> Our example is based on [backend.starters.dev-website](https://github.com/starters-dev/backend.starters.dev-website) repo.

```bash
> git clone https://github.com/starters-dev/backend.starters.dev-website services/website
```

5. Build and run

```bash
> bash build.sh
```

It will setup everything, including https certificates, and will start Docker Compose services in the background.

## What's inside

This setup is using [Traefik](https://github.com/traefik/traefik), the cloud native application proxy, that simplifies the process of getting `https` certificates and the way to describe services.

### Services

- [PostgreSQL](https://www.postgresql.org) - open source object-relational database known for reliability and data integrity. It uses [Bitnami Docker image](https://hub.docker.com/r/bitnami/postgresql).
- [Redis](https://redis.io) - open source, in-memory data store used by millions of developers as a database, cache, streaming engine, and message broker. It uses [Bitnami Docker image](https://hub.docker.com/r/bitnami/redis).
- [React App](https://backend.starters.dev) - sample frontend app. It uses [backend.starters.dev-website](https://github.com/starters-dev/backend.starters.dev-website) repo

> more services will be added...

## Environment variables

Current setup requires you to fill in `.env` file with variables that are used in services.

```
# [GENERAL]
DOMAIN_NAME=your-website.com
DO_AUTH_TOKEN=xxxxxxxxxxxxxxxxxxxxxx # for DNS challenge
ACME_EMAIL=email@your-website.com    # for https certificates
GITHUB_TOKEN=xxxxxxxxxxxxxxxxxxxxxx  # (optional) for private repos

# [REDIS]
REDIS_PASSWORD=
REDIS_DISABLE_COMMANDS=FLUSHDB,FLUSHALL

# [POSTGRES]
POSTGRESQL_USERNAME=admin
POSTGRESQL_PASSWORD=123456qwerty
POSTGRESQL_DATABASE=db
```

#### `DOMAIN_NAME`



## Tips

---

You can find example `env` file in the root folder.

`DO_AUTH_TOKEN` is used to generate https certificates against [DigitalOcean](https://digitalocean.com) challenge. You can generate one in the DO Networking dashboard or choose one of the [available providers](https://doc.traefik.io/traefik/https/acme/#providers).

---
